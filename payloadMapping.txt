function mapToDittoProtocolMsg(headers, textPayload, bytePayload, contentType) {
    const jsonString = String.fromCharCode.apply(null, new Uint8Array(bytePayload));
    const jsonData = JSON.parse(jsonString); 
    const thingId = 'arup.eight.fitzroy:UDMIduino-000'; 
    const value = { 
        udmi: jsonData
    };    
    return Ditto.buildDittoProtocolMsg(
        'my.test', // your namespace 
        thingId, 
        'things', // we deal with a thing
        'twin', // we want to update the twin
        'commands', // create a command to update the twin
        'modify', // modify the twin
        '/features', // modify all features at once
        headers, 
        value
    );
}